<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cutesy Finds | HQ</title>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Sora:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="admin.css">
</head>

<body>

    <!-- BACKGROUND ANIMATION -->
    <div class="bg-wrapper">
        <div class="noise-overlay"></div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- HEADER -->
    <header class="container">
        <div class="admin-header">
            <div class="brand">
                <span class="material-symbols-rounded">stars</span>
                Cutesy HQ
                <span class="admin-tag">Admin</span>
            </div>
            <div class="header-actions">
                <a href="index.html" class="btn-header-secondary" style="text-decoration:none;">
                    <span class="material-symbols-rounded" style="font-size:20px;">storefront</span>
                    <span class="btn-text">View Shop</span>
                </a>
                <button class="btn-header-secondary" onclick="logout()" style="color:#ef4444;">
                    <span class="material-symbols-rounded" style="font-size:20px;">logout</span>
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- STATS & SEARCH -->
        <div class="dashboard-controls">
            <div class="search-bar">
                <span class="material-symbols-rounded">search</span>
                <input id="searchInput" placeholder="Search products..." onkeyup="filterProducts()">
            </div>
            <div class="stat-pill">
                <span class="material-symbols-rounded" style="font-size:20px;">inventory_2</span>
                Total <span class="stat-count" id="totalProducts">0</span>
            </div>
            <div class="stat-pill success">
                <span class="material-symbols-rounded" style="font-size:20px; color:#34c759;">check_circle</span>
                <span class="btn-text">In Stock</span> <span class="stat-count" id="inStockCount">0</span>
            </div>
            <div class="stat-pill danger">
                <span class="material-symbols-rounded" style="font-size:20px; color:#ff3b30;">cancel</span>
                <span class="btn-text">Out</span> <span class="stat-count" id="outStockCount">0</span>
            </div>
        </div>

        <!-- PRODUCT GRID -->
        <div id="productList" class="product-grid">
            <!-- Cards rendered by JS -->
        </div>
    </div>

    <!-- FAB -->
    <button class="fab-add" onclick="addNewProduct()" aria-label="Add Product">
        <span class="material-symbols-rounded">add</span>
    </button>

    <!-- LOGIN MODAL -->
    <div class="modal" id="loginModal" style="background:linear-gradient(135deg, #fff5f7, #faf0ff); z-index:9000;">
        <div class="modal-content" style="max-width:380px; padding:40px; text-align:center;">
            <div class="login-icon"
                style="width:72px; height:72px; border-radius:22px; background:linear-gradient(135deg, #fff0f3, #ffe8f0); color:#ff477e; display:flex; align-items:center; justify-content:center; margin:0 auto 24px;">
                <span class="material-symbols-rounded" style="font-size:32px;">lock</span>
            </div>
            <h2 style="margin-bottom:8px;">Admin Access</h2>
            <p style="color:var(--text-gray); margin-bottom:24px; font-size:0.95rem;">Enter your password to continue
            </p>

            <p id="loginError"
                style="color:#ef4444; font-weight:bold; display:none; margin-bottom:16px; font-size:0.9rem;">
                Incorrect Password ‚ùå</p>

            <form onsubmit="login(event)">
                <div class="form-group">
                    <input type="password" id="adminPassword" placeholder="Enter Password" required
                        style="text-align:center; padding:16px;">
                </div>
                <button type="submit" class="btn-save" style="width:100%; padding:16px; font-size:1rem;">
                    <span class="material-symbols-rounded" style="font-size:20px;">lock_open</span>
                    Unlock Dashboard
                </button>
            </form>
        </div>
    </div>

    <!-- EDIT MODAL -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h2 id="modalTitle">Edit Product</h2>
                <button class="btn-close" onclick="closeModal()">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>

            <form id="productForm" onsubmit="saveProduct(event)">
                <input type="hidden" id="p_id">

                <div class="modal-body">
                    <!-- Basic Info -->
                    <div class="modal-section">
                        <div class="modal-section-title">Basic Info</div>
                        <div class="form-group">
                            <label>Product Name</label>
                            <input id="p_name" required placeholder="e.g. Hello Kitty Bag">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Category</label>
                                <select id="p_cat" required>
                                    <option value="autres">Autres</option>
                                    <option value="hellokitty">Hello Kitty</option>
                                    <option value="accessoires">Accessoires</option>
                                    <option value="deco">D√©co</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Badge</label>
                                <input id="p_badge" placeholder="e.g. New">
                            </div>
                        </div>

                        <div class="form-group" style="display:flex; align-items:center; gap:8px;">
                            <input type="checkbox" id="p_bestSeller" style="width:20px; height:20px;">
                            <label for="p_bestSeller"
                                style="margin:0; cursor:pointer; text-transform:none; letter-spacing:0;">Best Seller
                                üèÜ</label>
                        </div>
                    </div>

                    <!-- Pricing -->
                    <div class="modal-section">
                        <div class="modal-section-title">Pricing</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Price (DH)</label>
                                <input id="p_price" type="number" required placeholder="0">
                            </div>
                            <div class="form-group">
                                <label>Old Price</label>
                                <input id="p_oldPrice" type="number" placeholder="Optional">
                            </div>
                        </div>
                    </div>

                    <!-- Stock -->
                    <div class="modal-section">
                        <div class="modal-section-title">Stock & Sizes</div>
                        <div style="display:flex; gap:16px; margin-bottom:16px;">
                            <div class="form-group"
                                style="background:#f0fdf4; padding:14px 16px; border-radius:12px; display:flex; align-items:center; gap:12px; flex:1; border:1px solid #bbf7d0;">
                                <input type="checkbox" id="p_inStock" style="width:22px; height:22px; margin:0;"
                                    onchange="toggleSimpleStockInput()">
                                <label
                                    style="margin:0; flex:1; cursor:pointer; text-transform:none; letter-spacing:0; color:#16a34a;"
                                    for="p_inStock">In Stock</label>
                            </div>
                            <div class="form-group" id="simpleStockContainer" style="flex:1;">
                                <input type="number" id="p_simpleStock" placeholder="Quantity"
                                    style="padding:14px; border-radius:12px;">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>üìè Sizes (comma separated)</label>
                            <input id="p_sizes" placeholder="S, M, L" onblur="refreshVariantStockInputs()">
                        </div>
                    </div>

                    <!-- Display -->
                    <div class="modal-section">
                        <div class="modal-section-title">Display</div>
                        <div class="form-group">
                            <label>Variant Style</label>
                            <select id="p_variantStyle">
                                <option value="color">Color Swatches (Circles)</option>
                                <option value="button">Text Buttons (Numbered/Named)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Images -->
                    <div class="modal-section">
                        <div class="modal-section-title">Images</div>
                        <div class="form-group">
                            <label>Main Image</label>
                            <input id="p_img" required placeholder="image.jpg">
                        </div>
                        <div class="form-group">
                            <label>Gallery (comma separated)</label>
                            <textarea id="p_images" rows="2" placeholder="img1.jpg, img2.jpg"
                                style="font-family:monospace; font-size:0.9rem;"></textarea>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="modal-section">
                        <div class="modal-section-title">Description</div>
                        <div class="form-group">
                            <textarea id="p_desc" rows="3" placeholder="Product description..."></textarea>
                        </div>
                    </div>

                    <!-- Variants -->
                    <div class="modal-section">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                            <div class="modal-section-title" style="margin-bottom:0;">Variants</div>
                            <button type="button" onclick="addVariantField()" class="btn-add-variant"
                                style="width:auto; padding:6px 16px; margin-top:0;">
                                <span class="material-symbols-rounded" style="font-size:18px;">add</span> Add
                            </button>
                        </div>
                        <div id="variantsContainer"></div>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn-save">
                        <span class="material-symbols-rounded" style="font-size:18px;">save</span>
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="cities.js"></script>
    <script src="admin.js"></script>
</body>

</html>