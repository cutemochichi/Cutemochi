<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cutesy Finds | HQ</title>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700&family=Quicksand:wght@600;700&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="admin.css">
</head>

<body>

    <!-- BACKGROUND ANIMATION -->
    <div class="bg-wrapper">
        <div class="noise-overlay"></div>
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- HEADER -->
    <header class="container">
        <div class="admin-header">
            <div class="brand">
                <span class="material-symbols-rounded">stars</span>
                HQ Dashboard
            </div>
            <div class="header-actions">
                <a href="index.html" class="stat-pill" style="text-decoration:none; background:white;">
                    <span class="material-symbols-rounded">storefront</span>
                    <span class="btn-text">Shop</span>
                </a>
                <button class="stat-pill" onclick="logout()" style="background:#ffebee; color:#d32f2f;">
                    <span class="material-symbols-rounded">logout</span>
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- STATS & SEARCH -->
        <div class="dashboard-controls">
            <div class="search-bar">
                <span class="material-symbols-rounded" style="color:var(--text-gray);">search</span>
                <input id="searchInput" placeholder="Search products..." onkeyup="filterProducts()">
            </div>
            <div class="stat-pill">
                <span class="material-symbols-rounded">inventory_2</span>
                <span id="totalProducts">0</span>
            </div>
        </div>

        <!-- PRODUCT GRID -->
        <div id="productList" class="product-grid">
            <!-- Cards rendered by JS -->
        </div>
    </div>

    <!-- FAB (Mobile Add Button) -->
    <button class="fab-add" onclick="addNewProduct()">
        <span class="material-symbols-rounded">add</span>
    </button>

    <!-- LOGIN MODAL -->
    <div class="modal" id="loginModal" style="background:var(--bg-body); z-index:9000;">
        <div class="modal-content" style="max-width:400px; text-align:center;">
            <div
                style="background:white; width:80px; height:80px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 24px; box-shadow:var(--shadow-md);">
                <span class="material-symbols-rounded" style="font-size:40px; color:var(--color-primary);">lock</span>
            </div>
            <h2 style="margin-bottom:8px; color:var(--color-primary);">Admin Access</h2>
            <p style="color:#666; margin-bottom:24px;">Please enter your password to continue.</p>

            <p id="loginError" style="color:#d32f2f; font-weight:bold; display:none; margin-bottom:16px;">Incorrect
                Password ‚ùå</p>

            <form onsubmit="login(event)">
                <div class="form-group">
                    <input type="password" id="adminPassword" placeholder="Enter Password" required
                        style="text-align:center;">
                </div>
                <button type="submit" class="stat-pill"
                    style="width:100%; justify-content:center; background:var(--color-primary); color:white; padding:16px;">
                    Unlock Dashboard
                </button>
            </form>
        </div>
    </div>

    <!-- EDIT MODAL -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:24px;">
                <h2 id="modalTitle" style="font-size:1.5rem;">Edit Product</h2>
                <button onclick="closeModal()"
                    style="padding:8px; background:#f5f5f5; border-radius:50%; display:flex;">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>

            <form id="productForm" onsubmit="saveProduct(event)">
                <input type="hidden" id="p_id">

                <div class="form-group">
                    <label>Product Name</label>
                    <input id="p_name" required placeholder="e.g. Hello Kitty Bag">
                </div>

                <div style="display:flex; gap:16px;">
                    <div class="form-group" style="flex:1;">
                        <label>Category</label>
                        <select id="p_cat" required>
                            <option value="autres">Autres</option>
                            <option value="hellokitty">Hello Kitty</option>
                            <option value="accessoires">Accessoires</option>
                            <option value="deco">D√©co</option>
                        </select>
                    </div>
                </div>

                <div style="display:flex; gap:16px; align-items:center; margin-bottom:16px;">

                    <div class="form-group" style="flex:1; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="p_bestSeller" style="width:20px; height:20px;">
                        <label for="p_bestSeller" style="margin:0; cursor:pointer;">Best Seller üèÜ</label>
                    </div>
                </div>
                <div style="display:flex; gap:16px;">
                    <div class="form-group" style="flex:1;">
                        <label>Price (DH)</label>
                        <input id="p_price" type="number" required placeholder="0">
                    </div>
                    <div class="form-group" style="flex:1;">
                        <label>Old Price</label>
                        <input id="p_oldPrice" type="number" placeholder="Optional">
                    </div>
                </div>

                <div class="form-group" style="margin-top:16px;">
                    <label>Variant Style</label>
                    <select id="p_variantStyle">
                        <option value="color">Color Swatches (Circles)</option>
                        <option value="button">Text Buttons (Numbered/Named)</option>
                    </select>
                </div>

                <!-- STOCK TOGGLE & QTY -->
                <div style="display:flex; gap:16px; margin-bottom:16px;">
                    <div class="form-group"
                        style="background:#e8f5e9; padding:16px; border-radius:12px; display:flex; align-items:center; gap:12px; flex:1;">
                        <input type="checkbox" id="p_inStock" style="width:24px; height:24px; margin:0;"
                            onchange="toggleSimpleStockInput()">
                        <label style="margin:0; flex:1; cursor:pointer;" for="p_inStock">In Stock</label>
                    </div>
                    <div class="form-group" id="simpleStockContainer" style="flex:1;">
                        <input type="number" id="p_simpleStock" placeholder="Quantity"
                            style="padding:16px; border-radius:12px; border:2px solid #eee;">
                    </div>
                </div>

                <!-- Sizes -->
                <div class="form-group" style="background:#e3f2fd; padding:16px; border-radius:12px; margin-top:16px;">
                    <label style="color:#1565c0;">üìè Sizes</label>
                    <input id="p_sizes" placeholder="S, M, L" onblur="refreshVariantStockInputs()"
                        style="border-color:white;">
                </div>

                <!-- Images -->
                <div class="form-group"
                    style="background:#fff8e1; padding:16px; border-radius:12px; margin-top:16px; border:2px dashed #ffe0b2;">
                    <div style="display:flex; align-items:center; gap:8px; margin-bottom:12px; color:#f57c00;">
                        <span class="material-symbols-rounded">imagesmode</span>
                        <h3 style="font-size:1rem;">Gallery</h3>
                    </div>
                    <div class="form-group">
                        <input id="p_img" required placeholder="Main Image (image.jpg)" style="margin-bottom:8px;">
                        <textarea id="p_images" rows="2" placeholder="Start typing... (img1.jpg, img2.jpg)"
                            style="font-family:monospace; font-size:0.9rem;"></textarea>
                    </div>
                </div>

                <div class="form-group" style="margin-top:16px;">
                    <label>Description</label>
                    <textarea id="p_desc" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Badge</label>
                    <input id="p_badge" placeholder="e.g. New">
                </div>

                <!-- VARIANTS -->
                <div class="form-group" style="background:#fce4ec; padding:16px; border-radius:12px; margin-top:24px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:16px; align-items:center;">
                        <label style="margin:0; color:#c2185b;">‚ú® Variants</label>
                        <button type="button" onclick="addVariantField()"
                            style="background:white; padding:6px 12px; border-radius:20px; font-size:0.8rem; font-weight:bold; color:#d81b60;">+
                            Add</button>
                    </div>
                    <div id="variantsContainer"></div>
                </div>

                <div style="margin-top:32px;">
                    <button type="submit" class="stat-pill"
                        style="width:100%; justify-content:center; background:var(--color-primary); color:white; padding:16px; font-size:1.1rem;">
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="cities.js"></script>
    <script src="admin.js"></script>
</body>

</html>